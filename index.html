<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>Idle Game</title>
<style>
@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";
@import "https://cdn.jsdelivr.net/gh/asciidoctor/asciidoctor@2.0/data/stylesheets/asciidoctor-default.css";
@import url("https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&display=swap");
html {
  font-size: 20pt;
  font-family: "Noto Sans" !important;
}
html .title,
html h1 {
  font-family: "Noto Sans" !important;
}
html code,
html #footer-text {
  font-family: "Fira Code";
  font-variant-ligatures: contextual;
}

/*# sourceMappingURL=style.css.map */

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/styles/github.min.css">
</head>
<body class="article">
<div id="header">
<h1>Idle Game</h1>
</div>
<div id="content">
<div class="listingblock">
<div class="title">Idle Game</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">process.stdin.setRawMode(true);
process.stdin.setEncoding('utf8');
const keyCallbacks = {};
process.stdin.on("data", (key) =&gt; {
    if (keyCallbacks[key]) {
        keyCallbacks[key].forEach(cb =&gt; cb(key));
    }
});
function wait(t) {
    return new Promise(resolve =&gt; setTimeout(resolve, t * 1000));
}
const onKey = (targetKey, callback) =&gt; {
    if (!keyCallbacks[targetKey])
        keyCallbacks[targetKey] = [];
    keyCallbacks[targetKey].push(callback);
    return () =&gt; keyCallbacks[targetKey] = keyCallbacks[targetKey].filter(cb =&gt; cb !== callback);
};
const format = Intl.NumberFormat('en-CA', {
    minimumFractionDigits: 2,
    maximumFractionDigits: 2,
    useGrouping: true
});
function fmt(n) {
    return format.format(n);
}
const title = "Idle Game";
class State {
    run;
    keys;
    bank;
    job;
    constructor() {
        this.run = true;
        this.keys = [];
        this.bank = 0;
        this.job = false;
    }
    quit() {
        this.run = false;
    }
    newKey(key) {
        if (!this.keys.includes(String(key))) {
            this.keys.push(String(key));
        }
    }
}
class Collector {
    name;
    lvl;
    income;
    price;
    constructor(name, income, price) {
        this.name = name;
        this.lvl = 1;
        this.income = income;
        this.price = price;
    }
    get cost() {
        return this.price ** (this.lvl - 1);
    }
    get gain() {
        return this.income ** (this.lvl - 1);
    }
}
function main() {
    const currency = String.fromCodePoint(0x00A4);
    const game = new State();
    const income = [
        new Collector("Pocket-Change", 1.5, 1.5)
    ];
    (async () =&gt; {
        console.clear();
        console.log(`Welcome to "${title}"!`);
        await wait(3);
        while (game.run) {
            console.clear();
            switch (true) {
                case /\d/.test(String(game.keys[0])):
                    if (!game.job) {
                        game.job = true;
                        game.keys[0] = Number(game.keys[0]);
                        if (game.keys[0] &lt; income.length) {
                            const n = income.at(game.keys[0]);
                            if (game.bank &gt;= n.cost) {
                                console.log(`${fmt(game.bank)} - ${fmt(n.cost)}`);
                                n.lvl++;
                                game.bank -= n.cost;
                            }
                        }
                    }
                    break;
                default:
                    switch (game.keys[0]) {
                        case "q":
                            game.quit();
                            break;
                    }
                    break;
            }
            game.job = false;
            game.keys.shift();
            onKey("q", (k) =&gt; game.newKey(k));
            income.forEach((_, i) =&gt; {
                onKey(String(i + 1).replace(/\d(\d)/, "$1"), () =&gt; game.newKey(String(i)));
            });
            console.log(`${currency}${fmt(game.bank)}`);
            income.forEach((n, i) =&gt; {
                console.log([
                    `\t+${currency}${fmt(n.gain)}`,
                    `[${i + 1}]`,
                    `(-${currency}${fmt(n.cost)})`,
                    `${n.name}`,
                    `lvl. ${n.lvl}`
                ].join(" "));
                game.bank += n.gain;
            });
            await wait(1);
        }
        process.stdin.setRawMode(false);
        process.stdin.pause();
        process.exit(0);
    })();
}
main();</code></pre>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-10-15 10:11:21 UTC
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/highlight.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code[data-lang]')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
</body>
</html>